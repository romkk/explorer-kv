## 初始化数据库

```shell
bash ./generate_initialize_sql.sh | mysql -uroot -proot
```

## 删除数据库中所有表

```shell
mysql -D BitcoinExplorerDB -uroot -proot -Nse 'show tables' | while read table; do mysql -uroot -proot -e 'drop table '$table -D BitcoinExplorerDB; done
```

## 清空数据库中所有表

```shell
mysql -D BitcoinExplorerDB -uroot -proot -Nse 'show tables' | while read table; do mysql -uroot -proot -e 'truncate table '$table -D BitcoinExplorerDB; done
```

## bitcoind rpc补丁

```shell
cd bitcoin-0.10.0
patch -p1 < bitcoind-bm-rpc-v0.10.0.patch
```

打补丁后，会多两个RPC命令： `bm_get_best_block`, `bm_get_block_detail`.

```
$ bitcoin-cli -testnet -conf=/data/.bitcoin/bitcoin.conf bm_get_best_block
{
    "height" : 393928,
    "hash" : "00000000aba3469119e413c750b26e4821c84cc323b7282b0e50130da49221c5"
}

$ bitcoin-cli -testnet -conf=/data/.bitcoin/bitcoin.conf bm_get_block_detail 00000000aba3469119e413c750b26e4821c84cc323b7282b0e50130da49221c5
{
    "hash" : "00000000aba3469119e413c750b26e4821c84cc323b7282b0e50130da49221c5",
    "confirmations" : 1,
    "size" : 315,
    "height" : 393928,
    "version" : 3,
    "merkleroot" : "61a1af06172e7fd5a3ef9c78fff5763ec40b7b81bf401a8140c9695c4847956a",
    "tx" : [
        {
            "hash" : "61a1af06172e7fd5a3ef9c78fff5763ec40b7b81bf401a8140c9695c4847956a",
            "rawhex" : "01000000010000000000000000000000000000000000000000000000000000000000000000ffffffff0b03c80206062f503253482fffffffff0400f90295000000001976a914fdb9fb622b0db8d9121475a983288a0876f4de4888ac0000000000000000226a200000000000000000000000000000000000000000000000000000ffff0000000000000000000000001b6a1976a914fdb9fb622b0db8d9121475a983288a0876f4de4888ac0000000000000000326a30a9ad1f75681505006475b2e289ddc22c4421e0dba86c79c36fc72b46339cd9170f05be54c37210efba6f3718c2222b0000000000"
        }
    ],
    "time" : 1430920378,
    "nonce" : 1391370040,
    "bits" : "1d00ffff",
    "difficulty" : 1.00000000,
    "chainwork" : "000000000000000000000000000000000000000000000003edb4cad95d720fd4",
    "previousblockhash" : "00000000006a0206d564175e3287dedd8f456a90d20a18155f83945678521b40",
    "rawhex" : "03000000401b52785694835f15180ad2906a458fddde87325e1764d506026a00000000006a9547485c69c940811a40bf817b0bc43e76f5ff789cefa3d57f2e1706afa161ba1c4a55ffff001d389fee520101000000010000000000000000000000000000000000000000000000000000000000000000ffffffff0b03c80206062f503253482fffffffff0400f90295000000001976a914fdb9fb622b0db8d9121475a983288a0876f4de4888ac0000000000000000226a200000000000000000000000000000000000000000000000000000ffff0000000000000000000000001b6a1976a914fdb9fb622b0db8d9121475a983288a0876f4de4888ac0000000000000000326a30a9ad1f75681505006475b2e289ddc22c4421e0dba86c79c36fc72b46339cd9170f05be54c37210efba6f3718c2222b0000000000"
}
```
